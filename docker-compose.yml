version: '3.8'
services:
    php-apache-environment:
        container_name: php-apache
        build:
            context: ./php
            dockerfile: ./php/Dockerfile
        depends_on:
            - db
        volumes:
            - ./php/src:/var/www/html/
        ports:
            - 8000:80
    db:
        container_name: db
        image: mysql
        restart: always
        environment:
            MYSQL_ROOT_PASSWORD: root
        ports:
            - 9906:80
    phpmyadmin:
        image: arm64v8/phpmyadmin
        ports:
           - '8080:80'
        restart: always
        environment:
          PMA_HOST: db
        depends_on:
          - db
    # jenkins:
    #   image: jenkins/jenkins:lts
    #   user: root
    #   ports:
    #    - 8081:80
    #   container_name: jenkins
    #   volumes:
    #     - ~/jenkins:/var/jenkins_home
    #     - /var/run/docker.sock:/var/run/docker.sock
    #     - /usr/local/bin/docker:/usr/local/bin/docker
    # nodejs:
    #     build: .
    #     command: node index.js
    #     volumes:
    #        - /Users/basselsaadeareeba/Desktop/DevopsProjet/src/
    #        - /Users/basselsaadeareeba/Desktop/DevopsProjet/src/node_modules
    #     ports:
    #       - 3000:3000
    #     depends_on:
    #       - db





# version: '3'
# services:
#   db:
#     container_name: db
#     image: mysql:latest
#     restart: always
#     environment:
#       MYSQL_ROOT_PASSWORD: root
#   php-apache-environment:
#         container_name: php-apache
#         build:
#             context: ./php
#             dockerfile: Dockerfile
#         depends_on:
#             - db
#         volumes:
#             - ./php/src:/var/www/html/
#         ports:
#             - 8000:80


# version: '3'
# services:
#   db:
#     container_name: db
#     image: mysql:latest
#     restart: always
#     environment:
#       MYSQL_ROOT_PASSWORD: root
#   php-apache-environment:
#         container_name: php-apache
#         build:
#             context: ./php
#             dockerfile: Dockerfile
#         depends_on:
#             - db
#         volumes:
#             - ./php/src:/var/www/html/
#         ports:
#             - 8000:80


# # version: '3'
# # services:
# #   db:
# #     container_name: db
# #     image: mysql:latest
# #     restart: always
# #     environment:
# #       MYSQL_ROOT_PASSWORD: root
# #     ports:
# #         - "9906:3306"
# #   php-apache-environment:
# #         container_name: php-apache
# #         build:
# #             context: ./php
# #             dockerfile: Dockerfile
# #         depends_on:
# #             - db
# #         volumes:
# #             - ./php/src:/var/www/html/
# #         ports:
# #             - 8000:80

